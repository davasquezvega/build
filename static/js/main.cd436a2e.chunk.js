(this["webpackJsonpstrapi-login"]=this["webpackJsonpstrapi-login"]||[]).push([[0],{34:function(e,t,a){e.exports=a(63)},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(32),c=a.n(o),l=a(19),s=a(1),i=(a(39),a(17)),m=["github","facebook","google","twitter","discord","twitch","instagram","vk"],u=function(e){return r.a.createElement("a",{href:"".concat("https://tienda-fralejo-backend.herokuapp.com","/connect/").concat(e.providerName)},r.a.createElement("button",{style:{width:"150px"}},"Connect to ",e.providerName))},p=function(e){return r.a.createElement("button",{onClick:e.onClick},"Logout")},d=function(e){var t,a,o=Object(n.useState)(!!localStorage.getItem("jwt")),c=Object(i.a)(o,2),l=c[0],s=c[1];return t=l?r.a.createElement(p,{onClick:function(e){e.preventDefault(),localStorage.removeItem("jwt"),localStorage.removeItem("username"),s(!1)}}):r.a.createElement("ul",{style:{listStyleType:"none"}},m.map((function(e,t){return r.a.createElement("li",{key:e},r.a.createElement(u,{providerName:e}))}))),a=l?"Welcome ".concat(localStorage.getItem("username"),", you are connected!"):"You are not connected. Please log in.",r.a.createElement("div",null,r.a.createElement("p",null,a),t)},h=function(e){var t=Object(n.useState)("Loading..."),a=Object(i.a)(t,2),o=a[0],c=a[1],l=Object(s.g)(),m=Object(s.h)(),u=Object(s.f)();return Object(n.useEffect)((function(){fetch("".concat("https://tienda-fralejo-backend.herokuapp.com","/auth/").concat(m.providerName,"/callback").concat(l.search)).then((function(e){if(200!==e.status)throw new Error("Couldn't login to Strapi. Status: ".concat(e.status));return e})).then((function(e){return e.json()})).then((function(e){localStorage.setItem("jwt",e.jwt),localStorage.setItem("username",e.user.username),c("You have been successfully logged in. You will be redirected in a few seconds..."),setTimeout((function(){return u.push("/")}),3e3)})).catch((function(e){console.log(e),c("An error occurred, please see the developer console.")}))}),[u,l.search,m.providerName]),r.a.createElement("p",null,o)},f=a(12),g=a.n(f),b=a(7),v=a(13),E=a(16),w=a(8),j=a(9),k=a(11),O=a(10),y=a(15),C=a.n(y),N=function(e){Object(k.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(w.a)(this,a),(n=t.call(this,e)).handleChange=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.persist(),e.next=3,n.setState({form:Object(v.a)(Object(v.a)({},n.state.form),{},Object(b.a)({},t.target.name,t.target.value))});case 3:console.log(n.state.form);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.peticionPost=function(){C.a.post("".concat("https://tienda-fralejo-backend.herokuapp.com","/auth/local/register"),{username:n.state.form.email,email:n.state.form.email,password:n.state.form.password}).then((function(e){n.setState({form:null}),console.log("Well done!"),console.log("User profile",e.data.user),console.log("User token",e.data.jwt)})).catch((function(e){console.log("An error occurred:",e.response)}))},n.state={form:{email:"",password:""}},n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.form;return r.a.createElement("div",{className:"register"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},"Reg\xedstrate"),r.a.createElement("div",{className:"card-body form-group"},r.a.createElement("label",{htmlFor:"email"},"email"),r.a.createElement("input",{type:"email",className:"form-control",id:"email",name:"email",value:t?t.email:"",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"password"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",name:"password",value:t?t.password:"",onChange:this.handleChange}),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.peticionPost()}},"Registrarse"))))}}]),a}(n.Component),S=function(e){Object(k.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(w.a)(this,a),(n=t.call(this,e)).peticionPost=function(){C.a.post("".concat("https://tienda-fralejo-backend.herokuapp.com","/auth/local"),{identifier:n.state.form.email,password:n.state.form.password}).then((function(e){console.log("Well done!"),console.log("User profile",e.data.user),console.log("User token",e.data.jwt)})).catch((function(e){console.log("An error occurred:",e.response)}))},n.handleChange=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.persist(),n.setState({form:Object(v.a)(Object(v.a)({},n.state.form),{},Object(b.a)({},t.target.name,t.target.value))});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={form:{email:"",password:""}},n}return Object(j.a)(a,[{key:"render",value:function(){var e=this,t=this.state.form;return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},"Loggu\xe9ate"),r.a.createElement("div",{className:"card-body form-group"},r.a.createElement("label",{htmlFor:"email"},"email"),r.a.createElement("input",{type:"email",className:"form-control",id:"email",name:"email",value:t?t.email:"",placeholder:"digita tu correo electr\xf3nico",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"password"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",name:"password",value:t?t.password:"",placeholder:"digita tu contrase\xf1a",onChange:this.handleChange}),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.peticionPost()}},"Ingresar"))))}}]),a}(n.Component),x=(n.Component,function(){return r.a.createElement(l.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/connect/github/redirect",component:h}),r.a.createElement(s.a,{exact:!0,path:"/connect/:providerName/redirect",component:h}),r.a.createElement(s.a,{exact:!0,path:"/",component:d}),r.a.createElement(s.a,{exact:!0,path:"/register",component:N}),r.a.createElement(s.a,{exact:!0,path:"/login",component:S})))});c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.cd436a2e.chunk.js.map